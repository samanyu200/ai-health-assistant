<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard â€” AI Health Assistant</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.3/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 h-screen flex">
  <aside class="w-64 bg-white p-6 border-r">
    <h1 class="text-xl font-bold mb-8">My Health</h1>
    <ul class="space-y-4 text-gray-700">
      <li><button onclick="show('scan')" class="hover:text-green-600">Scan Food</button></li>
      <li><button onclick="show('plan')" class="hover:text-green-600">Diet Plan</button></li>
      <li><button onclick="show('alerts')" class="hover:text-green-600">Alerts</button></li>
      <li><button onclick="show('chat')" class="hover:text-green-600">Health Chat</button></li>
      <li><button onclick="logout()" class="hover:text-red-600">Logout</button></li>
    </ul>
  </aside>

  <main class="flex-1 p-8 overflow-auto">
    <!-- Health bar + summary -->
    <div id="status" class="mb-8"></div>
    <!-- Content components -->
    <div id="scan" class="hidden">
      <h2 class="text-lg font-semibold mb-4">Scan Food (Image or Barcode)</h2>
      <!-- file upload -->
      <input type="file" id="imgInput" accept="image/*" class="mb-4"/>
      <button onclick="scanImage()" class="bg-green-600 text-white py-2 px-4 rounded">Upload</button>
      <div id="scanResult" class="mt-4"></div>
    </div>
    <div id="plan" class="hidden"><h2 class="text-lg font-semibold mb-4">Diet Plan</h2><div id="planContent"></div></div>
    <div id="alerts" class="hidden"><h2 class="text-lg font-semibold mb-4">Alerts</h2><div id="alertsContent"></div></div>
    <div id="chat" class="hidden"><h2 class="text-lg font-semibold mb-4">Health Chat</h2>
      <textarea id="question" rows="3" placeholder="Ask a health question..." class="w-full p-2 border rounded"></textarea>
      <button onclick="askChat()" class="mt-2 bg-blue-600 text-white py-2 px-4 rounded">Ask</button>
      <div id="chatAnswer" class="mt-4"></div>
    </div>
  </main>

  <script src="health_status.js"></script>
  <script>
    function show(section) {
      document.querySelectorAll('main > div[id]').forEach(d => d.classList.add('hidden'));
      document.getElementById(section).classList.remove('hidden');
    }
    function logout() {
      localStorage.removeItem("token");
      window.location = "login.html";
    }
  </script>
</body>
</html>
